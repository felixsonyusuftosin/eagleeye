version: '3.0'
services:
    # couchdb:
    #   image: couchdb
    #   deploy:
    #        replicas: 1
    #   ports:
    #       - 5984:5984
    #   privileged: true
    #   environment:
    #       - COUCHDB_HOST
    #       - COUCHDB_PORT
    #       - COUCHDB_USERNAME
    #       - COUCHDB_PASSWORD
    app:
        build: 
          context: .
          dockerfile: Dockerfile
        ports:
            - 3000:3000
            - 3333:3333
        environment:
            - COUCHBASE_HOST
            - COUCHBASE_BUCKET
            - COUCHBASE_BUCKET_PASSWORD
            - APPLICATION_PORT
            - CLIENT_PORT
            - SERVER_PORT
            - SECRET_KEY
            - APP_NAME
            - HOSTEDCOUCH
            - HOSTEDCOUCHPASSWORD
            - HOSTEDCOUCHURL
        restart: always